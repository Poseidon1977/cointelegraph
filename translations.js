/**
 * CoinTelegraph Localization v4.0
 */

const translations = {
    tr: {
        'dashboard': 'Piyasa Ã–zeti',
        'stocks': 'Borsa / Hisseler',
        'commodities': 'Emtialar',
        'forex': 'DÃ¶viz / Forex',
        'news': 'DÃ¼nya Haberleri',
        'settings': 'Ayarlar',
        'market_overview': 'Piyasa Ã–zeti',
        'global_stocks': 'KÃ¼resel Hisseler',
        'commodity_prices': 'Emtia FiyatlarÄ±',
        'forex_rates': 'DÃ¶viz KurlarÄ±',
        'breaking_news': 'Son Dakika Haberler',
        'preferences': 'Uygulama AyarlarÄ±',
        'lang_label': 'Dil SeÃ§imi',
        'converter': 'DÃ¶viz Ã‡evirici',
        'amount': 'Miktar',
        'from': 'Kaynak',
        'to': 'Hedef',
        'swap': 'DeÄŸiÅŸtir',
        'result': 'SonuÃ§',
        'gold_title': 'ðŸ¥‡ AltÄ±n / Gold',
        'metals': 'DeÄŸerli Metaller',
        'energy': 'Enerji',
        'agri': 'TarÄ±m',
        'livestock': 'HayvancÄ±lÄ±k',
        'gram_altin': 'GRAM ALTIN',
        'viewing': 'gÃ¶rÃ¼ntÃ¼leniyor'
    },
    en: {
        'dashboard': 'Market Overview',
        'stocks': 'Stock Market',
        'commodities': 'Commodities',
        'forex': 'Foreign Exchange',
        'news': 'Global News',
        'settings': 'Settings',
        'market_overview': 'Market Overview',
        'global_stocks': 'Global Stocks',
        'commodity_prices': 'Commodity Prices',
        'forex_rates': 'Forex Rates',
        'breaking_news': 'Breaking News',
        'preferences': 'Preferences',
        'lang_label': 'Language',
        'converter': 'Currency Converter',
        'amount': 'Amount',
        'from': 'From',
        'to': 'To',
        'swap': 'Swap',
        'result': 'Result',
        'gold_title': 'ðŸ¥‡ Gold',
        'metals': 'Precious Metals',
        'energy': 'Energy',
        'agri': 'Agriculture',
        'livestock': 'Livestock',
        'gram_altin': 'GRAM GOLD',
        'viewing': 'viewing'
    },
    ua: {
        'dashboard': 'ÐžÐ³Ð»ÑÐ´ Ñ€Ð¸Ð½ÐºÑƒ',
        'stocks': 'Ð¤Ð¾Ð½Ð´Ð¾Ð²Ð¸Ð¹ Ñ€Ð¸Ð½Ð¾Ðº',
        'commodities': 'Ð¢Ð¾Ð²Ð°Ñ€Ð¸',
        'forex': 'Ð¤Ð¾Ñ€ÐµÐºÑ',
        'news': 'ÐÐ¾Ð²Ð¸Ð½Ð¸ ÑÐ²Ñ–Ñ‚Ñƒ',
        'settings': 'ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ',
        'market_overview': 'ÐžÐ³Ð»ÑÐ´ Ñ€Ð¸Ð½ÐºÑƒ',
        'global_stocks': 'Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ– Ð°ÐºÑ†Ñ–Ñ—',
        'commodity_prices': 'Ð¦Ñ–Ð½Ð¸ Ð½Ð° Ñ‚Ð¾Ð²Ð°Ñ€Ð¸',
        'forex_rates': 'ÐšÑƒÑ€ÑÐ¸ Ð²Ð°Ð»ÑŽÑ‚',
        'breaking_news': 'ÐžÑÑ‚Ð°Ð½Ð½Ñ– Ð½Ð¾Ð²Ð¸Ð½Ð¸',
        'preferences': 'ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ',
        'lang_label': 'Ð’Ð¸Ð±Ñ–Ñ€ Ð¼Ð¾Ð²Ð¸',
        'converter': 'ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚ÐµÑ€ Ð²Ð°Ð»ÑŽÑ‚',
        'amount': 'Ð¡ÑƒÐ¼Ð°',
        'from': 'Ð—',
        'to': 'Ð’',
        'swap': 'ÐžÐ±Ð¼Ñ–Ð½ÑÑ‚Ð¸',
        'result': 'Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚',
        'gold_title': 'ðŸ¥‡ Ð—Ð¾Ð»Ð¾Ñ‚Ð¾',
        'metals': 'Ð”Ð¾Ñ€Ð¾Ð³Ð¾Ñ†Ñ–Ð½Ð½Ñ– Ð¼ÐµÑ‚Ð°Ð»Ð¸',
        'energy': 'Ð•Ð½ÐµÑ€Ð³ÐµÑ‚Ð¸ÐºÐ°',
        'agri': 'Ð¡Ñ–Ð»ÑŒÑÑŒÐºÐµ Ð³Ð¾ÑÐ¿Ð¾Ð´Ð°Ñ€ÑÑ‚Ð²Ð¾',
        'livestock': 'Ð¢Ð²Ð°Ñ€Ð¸Ð½Ð½Ð¸Ñ†Ñ‚Ð²Ð¾',
        'gram_altin': 'Ð“Ð ÐÐœ Ð—ÐžÐ›ÐžÐ¢Ð',
        'viewing': 'Ð¿ÐµÑ€ÐµÐ³Ð»ÑÐ´'
    },
    de: {
        'dashboard': 'MarktÃ¼bersicht',
        'stocks': 'Aktienmarkt',
        'commodities': 'Rohstoffe',
        'forex': 'Devisen',
        'news': 'Weltnachrichten',
        'settings': 'Einstellungen',
        'market_overview': 'MarktÃ¼bersicht',
        'global_stocks': 'Globale Aktien',
        'commodity_prices': 'Rohstoffpreise',
        'forex_rates': 'Wechselkurse',
        'breaking_news': 'Nachrichten',
        'preferences': 'Einstellungen',
        'lang_label': 'Sprachauswahl',
        'converter': 'WÃ¤hrungsrechner',
        'amount': 'Betrag',
        'from': 'Von',
        'to': 'Nach',
        'swap': 'Tauschen',
        'result': 'Ergebnis',
        'gold_title': 'ðŸ¥‡ Gold',
        'metals': 'Edelmetalle',
        'energy': 'Energie',
        'agri': 'Landwirtschaft',
        'livestock': 'Viehbestand',
        'gram_altin': 'GRAMM GOLD',
        'viewing': 'wird angezeigt'
    }
};

function t(key) {
    const lang = localStorage.getItem('app_lang') || 'en';
    return translations[lang][key] || key;
}

function updateUILanguage() {
    try {
        const lang = localStorage.getItem('app_lang') || 'en';
        document.documentElement.lang = lang;

        // Update Page Title Mapping
        const viewTitles = {
            'dashboard': 'market_overview',
            'stocks': 'global_stocks',
            'commodities': 'commodity_prices',
            'forex': 'forex_rates',
            'news': 'breaking_news',
            'settings': 'preferences'
        };

        const currentView = (typeof State !== 'undefined') ? State.currentView : 'dashboard';
        const titleEl = document.getElementById('page-title');
        if (titleEl) titleEl.innerText = t(viewTitles[currentView]);

        // Navigation Sync
        Object.keys(viewTitles).forEach(view => {
            const navSpan = document.getElementById(`nav-${view}`);
            if (navSpan) navSpan.innerText = t(view);
        });

        // Other static labels
        const staticMap = {
            'conv-title': 'converter',
            'label-lang': 'lang_label',
            'set-title': 'preferences'
        };

        Object.entries(staticMap).forEach(([id, key]) => {
            const el = document.getElementById(id);
            if (el) el.innerText = t(key);
        });

    } catch (e) {
        console.warn('UI Language Sync non-fatal error:', e);
    }
}
