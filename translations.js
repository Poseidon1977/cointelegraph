const translations = {
    tr: {
        'dashboard': 'Piyasa Ã–zeti',
        'stocks': 'Borsa / Hisseler',
        'commodities': 'Emtialar',
        'forex': 'DÃ¶viz / Forex',
        'news': 'DÃ¼nya Haberleri',
        'settings': 'Ayarlar',
        'crypto_title': 'Kripto Para PiyasasÄ±',
        'stocks_title': 'Global Hisse Senetleri',
        'commodities_title': 'Emtia FiyatlarÄ±',
        'forex_title': 'DÃ¶viz KurlarÄ±',
        'news_title': 'Son Dakika Haberler',
        'settings_title': 'Uygulama AyarlarÄ±',
        'lang_label': 'Dil SeÃ§imi',
        'converter': 'DÃ¶viz Ã‡evirici',
        'amount': 'Miktar',
        'from': 'Kaynak',
        'to': 'Hedef',
        'swap': 'DeÄŸiÅŸtir',
        'result': 'SonuÃ§',
        'gold_title': 'ðŸ¥‡ AltÄ±n / Gold',
        'metals': 'DeÄŸerli Metaller',
        'energy': 'Enerji',
        'agri': 'TarÄ±m',
        'livestock': 'HayvancÄ±lÄ±k',
        'gram_altin': 'GRAM ALTIN',
        'global_market': 'KÃœRESEL PÄ°YASA'
    },
    en: {
        'dashboard': 'Market Overview',
        'stocks': 'Stock Market',
        'commodities': 'Commodities',
        'forex': 'Foreign Exchange',
        'news': 'Global News',
        'settings': 'Settings',
        'crypto_title': 'Crypto Market',
        'stocks_title': 'Global Stocks',
        'commodities_title': 'Commodity Prices',
        'forex_title': 'Forex Rates',
        'news_title': 'Breaking News',
        'settings_title': 'Settings',
        'lang_label': 'Language Selection',
        'converter': 'Currency Converter',
        'amount': 'Amount',
        'from': 'From',
        'to': 'To',
        'swap': 'Swap',
        'result': 'Result',
        'gold_title': 'ðŸ¥‡ gold',
        'metals': 'Precious Metals',
        'energy': 'Energy',
        'agri': 'Agriculture',
        'livestock': 'Livestock',
        'gram_altin': 'GRAM GOLD',
        'global_market': 'GLOBAL MARKET'
    },
    ua: {
        'dashboard': 'ÐžÐ³Ð»ÑÐ´ Ñ€Ð¸Ð½ÐºÑƒ',
        'stocks': 'Ð¤Ð¾Ð½Ð´Ð¾Ð²Ð¸Ð¹ Ñ€Ð¸Ð½Ð¾Ðº',
        'commodities': 'Ð¢Ð¾Ð²Ð°Ñ€Ð¸',
        'forex': 'Ð¤Ð¾Ñ€ÐµÐºÑ',
        'news': 'ÐÐ¾Ð²Ð¸Ð½Ð¸',
        'settings': 'ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ',
        'crypto_title': 'ÐšÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€Ð¸Ð½Ð¾Ðº',
        'stocks_title': 'ÐÐºÑ†Ñ–Ñ—',
        'commodities_title': 'Ð¦Ñ–Ð½Ð¸ Ð½Ð° Ñ‚Ð¾Ð²Ð°Ñ€Ð¸',
        'forex_title': 'ÐšÑƒÑ€ÑÐ¸ Ð²Ð°Ð»ÑŽÑ‚',
        'news_title': 'ÐžÑÑ‚Ð°Ð½Ð½Ñ– Ð½Ð¾Ð²Ð¸Ð½Ð¸',
        'settings_title': 'ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ',
        'lang_label': 'Ð’Ð¸Ð±Ñ–Ñ€ Ð¼Ð¾Ð²Ð¸',
        'converter': 'ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚ÐµÑ€ Ð²Ð°Ð»ÑŽÑ‚',
        'amount': 'Ð¡ÑƒÐ¼Ð°',
        'from': 'Ð—',
        'to': 'Ð’',
        'swap': 'ÐžÐ±Ð¼Ñ–Ð½ÑÑ‚Ð¸',
        'result': 'Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚',
        'gold_title': 'ðŸ¥‡ Ð—Ð¾Ð»Ð¾Ñ‚Ð¾',
        'metals': 'Ð”Ð¾Ñ€Ð¾Ð³Ð¾Ñ†Ñ–Ð½Ð½Ñ– Ð¼ÐµÑ‚Ð°Ð»Ð¸',
        'energy': 'Ð•Ð½ÐµÑ€Ð³ÐµÑ‚Ð¸ÐºÐ°',
        'agri': 'Ð¡Ñ–Ð»ÑŒÑÑŒÐºÐµ Ð³Ð¾ÑÐ¿Ð¾Ð´Ð°Ñ€ÑÑ‚Ð²Ð¾',
        'livestock': 'Ð¢Ð²Ð°Ñ€Ð¸Ð½Ð½Ð¸Ñ†Ñ‚Ð²Ð¾',
        'gram_altin': 'Ð“Ð ÐÐœ Ð—ÐžÐ›ÐžÐ¢Ð',
        'global_market': 'Ð“Ð›ÐžÐ‘ÐÐ›Ð¬ÐÐ˜Ð™ Ð Ð˜ÐÐžÐš'
    },
    de: {
        'dashboard': 'MarktÃ¼bersicht',
        'stocks': 'Aktienmarkt',
        'commodities': 'Rohstoffe',
        'forex': 'Devisen',
        'news': 'Nachrichten',
        'settings': 'Einstellungen',
        'crypto_title': 'Kryptomarkt',
        'stocks_title': 'Aktien',
        'commodities_title': 'Rohstoffpreise',
        'forex_title': 'Wechselkurse',
        'news_title': 'Nachrichten',
        'settings_title': 'Einstellungen',
        'lang_label': 'Sprachauswahl',
        'converter': 'WÃ¤hrungsrechner',
        'amount': 'Betrag',
        'from': 'Von',
        'to': 'Nach',
        'swap': 'Tauschen',
        'result': 'Ergebnis',
        'gold_title': 'ðŸ¥‡ Gold',
        'metals': 'Edelmetalle',
        'energy': 'Energie',
        'agri': 'Landwirtschaft',
        'livestock': 'Viehbestand',
        'gram_altin': 'GRAMM GOLD',
        'global_market': 'GLOBALER MARKT'
    }
};

function t(key) {
    const lang = localStorage.getItem('app_lang') || 'en';
    return translations[lang][key] || key;
}

function updateUILanguage() {
    const lang = localStorage.getItem('app_lang') || 'en';

    // Update body class for potential CSS styling per lang
    document.body.className = `lang-${lang}`;

    // Update nav items
    document.querySelectorAll('.nav-item').forEach(item => {
        const target = item.dataset.target;
        const textSpan = item.querySelector('span:not(.nav-icon)');
        if (textSpan) textSpan.innerText = t(target);
    });

    // Update headers and labels
    const pageTitle = document.getElementById('page-title');
    if (pageTitle) {
        const currentView = window.currentView || 'dashboard';
        pageTitle.innerText = t(currentView);
    }

    // Converter labels
    const convLabels = {
        'conv-title-text': 'converter',
        'label-amount': 'amount',
        'label-from': 'from',
        'label-to': 'to',
        'conv-swap': 'swap',
        'conv-result-label': 'result'
    };

    for (const [id, key] of Object.entries(convLabels)) {
        const el = document.getElementById(id);
        if (el) el.innerText = t(key);
    }

    // Refresh current view data to apply translations in grids
    if (typeof fetchCurrentViewData === 'function') {
        fetchCurrentViewData();
    }
}
