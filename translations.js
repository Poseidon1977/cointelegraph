/**
 * CoinTelegraph Localization v4.0
 */

const translations = {
    tr: {
        'dashboard': 'Piyasa Ã–zeti',
        'stocks': 'Borsa / Hisseler',
        'commodities': 'Emtialar',
        'forex': 'DÃ¶viz / Forex',
        'news': 'DÃ¼nya Haberleri',
        'settings': 'Ayarlar',
        'market_overview': 'Piyasa Ã–zeti',
        'global_stocks': 'KÃ¼resel Hisseler',
        'commodity_prices': 'Emtia FiyatlarÄ±',
        'forex_rates': 'DÃ¶viz KurlarÄ±',
        'breaking_news': 'Son Dakika Haberler',
        'preferences': 'Uygulama AyarlarÄ±',
        'lang_label': 'Dil SeÃ§imi',
        'converter': 'DÃ¶viz Ã‡evirici',
        'amount': 'Miktar',
        'from': 'Kaynak',
        'to': 'Hedef',
        'swap': 'DeÄŸiÅŸtir',
        'result': 'SonuÃ§',
        'res_label': 'SonuÃ§',
        'label_amount': 'Miktar',
        'gold_title': 'ðŸ¥‡ AltÄ±n / Gold',
        'metals': 'DeÄŸerli Metaller',
        'energy': 'Enerji',
        'agri': 'TarÄ±m',
        'livestock': 'HayvancÄ±lÄ±k',
        'gram_altin': 'GRAM ALTIN',
        'altin_try': 'ALTIN/TRY',
        'altin_uah': 'ALTIN/UAH',
        'gram_altin_try': 'GRAM ALTIN (TRY)',
        'gram_altin_uah': 'GRAM ALTIN (UAH)',
        'viewing': 'gÃ¶rÃ¼ntÃ¼leniyor',
        'search_placeholder': 'Piyasalarda ara...',
        'search_no_results': 'SonuÃ§ bulunamadÄ±',
        'search_crypto': 'Kripto',
        'search_stock': 'Hisse',
        'search_commodity': 'Emtia',
        'news_error': 'Haberler yÃ¼klenemedi.',
        'Gold (24K)': '24 Ayar AltÄ±n',
        'Gold (22K)': '22 Ayar AltÄ±n',
        'Gold (14K)': '14 Ayar AltÄ±n',
        'Quarter Gold': 'Ã‡eyrek AltÄ±n',
        'Half Gold': 'YarÄ±m AltÄ±n',
        'Full Gold': 'Tam AltÄ±n',
        'unit_pcs': 'adet',
        // Stocks
        'AAPL': 'Apple', 'TSLA': 'Tesla', 'NVDA': 'Nvidia', 'MSFT': 'Microsoft', 'AMZN': 'Amazon',
        'GOOGL': 'Google', 'META': 'Meta', 'NFLX': 'Netflix', 'AMD': 'AMD', 'INTC': 'Intel',
        'KO': 'Coca-Cola', 'MCD': 'McDonald\'s', 'DIS': 'Disney', 'V': 'Visa', 'JPM': 'JPMorgan',
        'WMT': 'Walmart', 'PG': 'Procter & Gamble', 'NKE': 'Nike', 'ORCL': 'Oracle', 'CRM': 'Salesforce',
        'ADBE': 'Adobe', 'PYPL': 'PayPal', 'SHOP': 'Shopify', 'UBER': 'Uber', 'ABNB': 'Airbnb',
        'COIN': 'Coinbase', 'MSTR': 'MicroStrategy', 'QCOM': 'Qualcomm', 'TXN': 'Texas Instruments',
        // Commodities
        'Gold': 'AltÄ±n', 'Silver': 'GÃ¼mÃ¼ÅŸ', 'Platinum': 'Platin', 'Palladium': 'Paladyum', 'Copper': 'BakÄ±r',
        'Crude Oil (WTI)': 'Ham Petrol (WTI)', 'Brent Oil': 'Brent Petrol', 'Natural Gas': 'DoÄŸal Gaz',
        'Heating Oil': 'IsÄ±nma YakÄ±tÄ±', 'Gasoline': 'Benzin', 'Wheat': 'BuÄŸday', 'Corn': 'MÄ±sÄ±r',
        'Soybeans': 'Soya Fasulyesi', 'Coffee': 'Kahve', 'Sugar': 'Åžeker', 'Cotton': 'Pamuk',
        'Cocoa': 'Kakao', 'Rice': 'PirinÃ§', 'Live Cattle': 'CanlÄ± Hayvan', 'Lean Hogs': 'YaÄŸsÄ±z Domuz',
        // Units
        'oz': 'ons', 'ton': 'ton', 'barrel': 'varil', 'MMBtu': 'MMBtu', 'gallon': 'galon', 'lb': 'lb',
        'bushel': 'bushel', 'cwt': 'cwt',
        'unit_g': 'gr',
        'last_updated': 'Son GÃ¼ncelleme',
        'next_update': 'SÄ±ralÄ± GÃ¼ncelleme'
    },
    en: {
        'dashboard': 'Market Overview',
        'stocks': 'Stock Market',
        'commodities': 'Commodities',
        'forex': 'Foreign Exchange',
        'news': 'Global News',
        'settings': 'Settings',
        'market_overview': 'Market Overview',
        'global_stocks': 'Global Stocks',
        'commodity_prices': 'Commodity Prices',
        'forex_rates': 'Forex Rates',
        'breaking_news': 'Breaking News',
        'preferences': 'Preferences',
        'lang_label': 'Language',
        'converter': 'Currency Converter',
        'amount': 'Amount',
        'from': 'From',
        'to': 'To',
        'swap': 'Swap',
        'result': 'Result',
        'res_label': 'Result',
        'label_amount': 'Amount',
        'gold_title': 'ðŸ¥‡ Gold',
        'metals': 'Precious Metals',
        'energy': 'Energy',
        'agri': 'Agriculture',
        'livestock': 'Livestock',
        'gram_altin': 'GRAM GOLD',
        'altin_try': 'GOLD/TRY',
        'altin_uah': 'GOLD/UAH',
        'gram_altin_try': 'GRAM GOLD (TRY)',
        'gram_altin_uah': 'GRAM GOLD (UAH)',
        'viewing': 'viewing',
        'search_placeholder': 'Search markets...',
        'search_no_results': 'No matches found',
        'search_crypto': 'Crypto',
        'search_stock': 'Stock',
        'search_commodity': 'Commodity',
        'news_error': 'Failed to load world news.',
        'Gold (24K)': 'Gold (24K)',
        'Gold (22K)': 'Gold (22K)',
        'Gold (14K)': 'Gold (14K)',
        'Quarter Gold': 'Quarter Gold',
        'Half Gold': 'Half Gold',
        'Full Gold': 'Full Gold',
        'unit_pcs': 'pcs',
        // Stocks
        'AAPL': 'Apple', 'TSLA': 'Tesla', 'NVDA': 'Nvidia', 'MSFT': 'Microsoft', 'AMZN': 'Amazon',
        'GOOGL': 'Google', 'META': 'Meta', 'NFLX': 'Netflix', 'AMD': 'AMD', 'INTC': 'Intel',
        'KO': 'Coca-Cola', 'MCD': 'McDonald\'s', 'DIS': 'Disney', 'V': 'Visa', 'JPM': 'JPMorgan',
        'WMT': 'Walmart', 'PG': 'Procter & Gamble', 'NKE': 'Nike', 'ORCL': 'Oracle', 'CRM': 'Salesforce',
        'ADBE': 'Adobe', 'PYPL': 'PayPal', 'SHOP': 'Shopify', 'UBER': 'Uber', 'ABNB': 'Airbnb',
        'COIN': 'Coinbase', 'MSTR': 'MicroStrategy', 'QCOM': 'Qualcomm', 'TXN': 'Texas Instruments',
        // Commodities
        'Gold': 'Gold', 'Silver': 'Silver', 'Platinum': 'Platinum', 'Palladium': 'Palladium', 'Copper': 'Copper',
        'Crude Oil (WTI)': 'Crude Oil (WTI)', 'Brent Oil': 'Brent Oil', 'Natural Gas': 'Natural Gas',
        'Heating Oil': 'Heating Oil', 'Gasoline': 'Gasoline', 'Wheat': 'Wheat', 'Corn': 'Corn',
        'Soybeans': 'Soybeans', 'Coffee': 'Coffee', 'Sugar': 'Sugar', 'Cotton': 'Cotton',
        'Cocoa': 'Cocoa', 'Rice': 'Rice', 'Live Cattle': 'Live Cattle', 'Lean Hogs': 'Lean Hogs',
        // Units
        'oz': 'oz', 'ton': 'ton', 'barrel': 'barrel', 'MMBtu': 'MMBtu', 'gallon': 'gallon', 'lb': 'lb',
        'bushel': 'bushel', 'cwt': 'cwt',
        'unit_g': 'g',
        'last_updated': 'Last Updated',
        'next_update': 'Next Update'
    },
    ua: {
        'dashboard': 'ÐžÐ³Ð»ÑÐ´ Ñ€Ð¸Ð½ÐºÑƒ',
        'stocks': 'Ð¤Ð¾Ð½Ð´Ð¾Ð²Ð¸Ð¹ Ñ€Ð¸Ð½Ð¾Ðº',
        'commodities': 'Ð¢Ð¾Ð²Ð°Ñ€Ð¸',
        'forex': 'Ð¤Ð¾Ñ€ÐµÐºÑ',
        'news': 'ÐÐ¾Ð²Ð¸Ð½Ð¸ ÑÐ²Ñ–Ñ‚Ñƒ',
        'settings': 'ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ',
        'market_overview': 'ÐžÐ³Ð»ÑÐ´ Ñ€Ð¸Ð½ÐºÑƒ',
        'global_stocks': 'Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ– Ð°ÐºÑ†Ñ–Ñ—',
        'commodity_prices': 'Ð¦Ñ–Ð½Ð¸ Ð½Ð° Ñ‚Ð¾Ð²Ð°Ñ€Ð¸',
        'forex_rates': 'ÐšÑƒÑ€ÑÐ¸ Ð²Ð°Ð»ÑŽÑ‚',
        'breaking_news': 'ÐžÑÑ‚Ð°Ð½Ð½Ñ– Ð½Ð¾Ð²Ð¸Ð½Ð¸',
        'preferences': 'ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ',
        'lang_label': 'Ð’Ð¸Ð±Ñ–Ñ€ Ð¼Ð¾Ð²Ð¸',
        'converter': 'ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚ÐµÑ€ Ð²Ð°Ð»ÑŽÑ‚',
        'amount': 'Ð¡ÑƒÐ¼Ð°',
        'from': 'Ð—',
        'to': 'Ð’',
        'swap': 'ÐžÐ±Ð¼Ñ–Ð½ÑÑ‚Ð¸',
        'result': 'Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚',
        'res_label': 'Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚',
        'label_amount': 'Ð¡ÑƒÐ¼Ð°',
        'gold_title': 'ðŸ¥‡ Ð—Ð¾Ð»Ð¾Ñ‚Ð¾',
        'metals': 'Ð”Ð¾Ñ€Ð¾Ð³Ð¾Ñ†Ñ–Ð½Ð½Ñ– Ð¼ÐµÑ‚Ð°Ð»Ð¸',
        'energy': 'Ð•Ð½ÐµÑ€Ð³ÐµÑ‚Ð¸ÐºÐ°',
        'agri': 'Ð¡Ñ–Ð»ÑŒÑÑŒÐºÐµ Ð³Ð¾ÑÐ¿Ð¾Ð´Ð°Ñ€ÑÑ‚Ð²Ð¾',
        'livestock': 'Ð¢Ð²Ð°Ñ€Ð¸Ð½Ð½Ð¸Ñ†Ñ‚Ð²Ð¾',
        'gram_altin': 'Ð“Ð ÐÐœ Ð—ÐžÐ›ÐžÐ¢Ð',
        'altin_try': 'Ð—ÐžÐ›ÐžÐ¢Ðž/TRY',
        'altin_uah': 'Ð—ÐžÐ›ÐžÐ¢Ðž/UAH',
        'gram_altin_try': 'Ð“Ð ÐÐœ Ð—ÐžÐ›ÐžÐ¢Ð (TRY)',
        'gram_altin_uah': 'Ð“Ð ÐÐœ Ð—ÐžÐ›ÐžÐ¢Ð (UAH)',
        'viewing': 'Ð¿ÐµÑ€ÐµÐ³Ð»ÑÐ´',
        'search_placeholder': 'ÐŸÐ¾ÑˆÑƒÐº Ñ€Ð¸Ð½ÐºÑ–Ð²...',
        'search_no_results': 'Ð¡Ð¿Ñ–Ð²Ð¿Ð°Ð´Ñ–Ð½ÑŒ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾',
        'search_crypto': 'ÐšÑ€Ð¸Ð¿Ñ‚Ð¾',
        'search_stock': 'ÐÐºÑ†Ñ–Ñ',
        'search_commodity': 'Ð¢Ð¾Ð²Ð°Ñ€',
        'news_error': 'ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸ Ð½Ð¾Ð²Ð¸Ð½Ð¸.',
        'Gold (24K)': 'Ð—Ð¾Ð»Ð¾Ñ‚Ð¾ (24K)',
        'Gold (22K)': 'Ð—Ð¾Ð»Ð¾Ñ‚Ð¾ (22K)',
        'Gold (14K)': 'Ð—Ð¾Ð»Ð¾Ñ‚Ð¾ (14K)',
        'Quarter Gold': 'Ð§Ð²ÐµÑ€Ñ‚ÑŒ Ð·Ð¾Ð»Ð¾Ñ‚Ð°',
        'Half Gold': 'ÐŸÑ–Ð²Ð·Ð¾Ð»Ð¾Ñ‚Ð°',
        'Full Gold': 'ÐŸÐ¾Ð²Ð½Ðµ Ð·Ð¾Ð»Ð¾Ñ‚Ð¾',
        'unit_pcs': 'ÑˆÑ‚',
        // Stocks
        'AAPL': 'Apple', 'TSLA': 'Tesla', 'NVDA': 'Nvidia', 'MSFT': 'Microsoft', 'AMZN': 'Amazon',
        'GOOGL': 'Google', 'META': 'Meta', 'NFLX': 'Netflix', 'AMD': 'AMD', 'INTC': 'Intel',
        'KO': 'Coca-Cola', 'MCD': 'McDonald\'s', 'DIS': 'Disney', 'V': 'Visa', 'JPM': 'JPMorgan',
        'WMT': 'Walmart', 'PG': 'Procter & Gamble', 'NKE': 'Nike', 'ORCL': 'Oracle', 'CRM': 'Salesforce',
        'ADBE': 'Adobe', 'PYPL': 'PayPal', 'SHOP': 'Shopify', 'UBER': 'Uber', 'ABNB': 'Airbnb',
        'COIN': 'Coinbase', 'MSTR': 'MicroStrategy', 'QCOM': 'Qualcomm', 'TXN': 'Texas Instruments',
        // Commodities
        'Gold': 'Ð—Ð¾Ð»Ð¾Ñ‚Ð¾', 'Silver': 'Ð¡Ñ€Ñ–Ð±Ð»Ð¾', 'Platinum': 'ÐŸÐ»Ð°Ñ‚Ð¸Ð½Ð°', 'Palladium': 'ÐŸÐ°Ð»Ð°Ð´Ñ–Ð¹', 'Copper': 'ÐœÑ–Ð´ÑŒ',
        'Crude Oil (WTI)': 'Ð¡Ð¸Ñ€Ð° Ð½Ð°Ñ„Ñ‚Ð° (WTI)', 'Brent Oil': 'ÐÐ°Ñ„Ñ‚Ð° Brent', 'Natural Gas': 'ÐŸÑ€Ð¸Ñ€Ð¾Ð´Ð½Ð¸Ð¹ Ð³Ð°Ð·',
        'Heating Oil': 'ÐœÐ°Ð·ÑƒÑ‚', 'Gasoline': 'Ð‘ÐµÐ½Ð·Ð¸Ð½', 'Wheat': 'ÐŸÑˆÐµÐ½Ð¸Ñ†Ñ', 'Corn': 'ÐšÑƒÐºÑƒÑ€ÑƒÐ´Ð·Ð°',
        'Soybeans': 'Ð¡Ð¾Ñ”Ð²Ñ– Ð±Ð¾Ð±Ð¸', 'Coffee': 'ÐšÐ°Ð²Ð°', 'Sugar': 'Ð¦ÑƒÐºÐ¾Ñ€', 'Cotton': 'Ð‘Ð°Ð²Ð¾Ð²Ð½Ð°',
        'Cocoa': 'ÐšÐ°ÐºÐ°Ð¾', 'Rice': 'Ð Ð¸Ñ', 'Live Cattle': 'Ð–Ð¸Ð²Ð° Ñ…ÑƒÐ´Ð¾Ð±Ð°', 'Lean Hogs': 'ÐŸÑ–ÑÐ½Ð° ÑÐ²Ð¸Ð½Ð¸Ð½Ð°',
        // Units
        'oz': 'ÑƒÐ½Ñ†Ñ–Ñ', 'ton': 'Ñ‚Ð¾Ð½Ð½Ð°', 'barrel': 'Ð±Ð°Ñ€ÐµÐ»ÑŒ', 'MMBtu': 'MMBtu', 'gallon': 'Ð³Ð°Ð»Ð¾Ð½', 'lb': 'Ñ„ÑƒÐ½Ñ‚',
        'bushel': 'Ð±ÑƒÑˆÐµÐ»ÑŒ', 'cwt': 'Ñ†ÐµÐ½Ñ‚Ð½ÐµÑ€',
        'unit_g': 'Ð³',
        'last_updated': 'ÐžÑÑ‚Ð°Ð½Ð½Ñ” ÐžÐ½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ',
        'next_update': 'ÐÐ°ÑÑ‚ÑƒÐ¿Ð½Ðµ ÐžÐ½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ'
    },
    de: {
        'dashboard': 'MarktÃ¼bersicht',
        'stocks': 'Aktienmarkt',
        'commodities': 'Rohstoffe',
        'forex': 'Devisen',
        'news': 'Weltnachrichten',
        'settings': 'Einstellungen',
        'market_overview': 'MarktÃ¼bersicht',
        'global_stocks': 'Globale Aktien',
        'commodity_prices': 'Rohstoffpreise',
        'forex_rates': 'Wechselkurse',
        'breaking_news': 'Nachrichten',
        'preferences': 'Einstellungen',
        'lang_label': 'Sprachauswahl',
        'converter': 'WÃ¤hrungsrechner',
        'amount': 'Betrag',
        'from': 'Von',
        'to': 'Nach',
        'swap': 'Tauschen',
        'result': 'Ergebnis',
        'res_label': 'Ergebnis',
        'label_amount': 'Betrag',
        'gold_title': 'ðŸ¥‡ Gold',
        'metals': 'Edelmetalle',
        'energy': 'Energie',
        'agri': 'Landwirtschaft',
        'livestock': 'Viehbestand',
        'gram_altin': 'GRAMM GOLD',
        'altin_try': 'GOLD/TRY',
        'altin_uah': 'GOLD/UAH',
        'gram_altin_try': 'GRAMM GOLD (TRY)',
        'gram_altin_uah': 'GRAMM GOLD (UAH)',
        'viewing': 'wird angezeigt',
        'search_placeholder': 'MÃ¤rkte suchen...',
        'search_no_results': 'Keine Treffer gefunden',
        'search_crypto': 'Krypto',
        'search_stock': 'Aktie',
        'search_commodity': 'Rohstoff',
        'news_error': 'Nachrichten konnten nicht geladen werden.',
        'Gold (24K)': 'Gold (24K)',
        'Gold (22K)': 'Gold (22K)',
        'Gold (14K)': 'Gold (14K)',
        'Quarter Gold': 'Viertelgold',
        'Half Gold': 'Halbgold',
        'Full Gold': 'Vollgold',
        'unit_pcs': 'stk',
        // Stocks
        'AAPL': 'Apple', 'TSLA': 'Tesla', 'NVDA': 'Nvidia', 'MSFT': 'Microsoft', 'AMZN': 'Amazon',
        'GOOGL': 'Google', 'META': 'Meta', 'NFLX': 'Netflix', 'AMD': 'AMD', 'INTC': 'Intel',
        'KO': 'Coca-Cola', 'MCD': 'McDonald\'s', 'DIS': 'Disney', 'V': 'Visa', 'JPM': 'JPMorgan',
        'WMT': 'Walmart', 'PG': 'Procter & Gamble', 'NKE': 'Nike', 'ORCL': 'Oracle', 'CRM': 'Salesforce',
        'ADBE': 'Adobe', 'PYPL': 'PayPal', 'SHOP': 'Shopify', 'UBER': 'Uber', 'ABNB': 'Airbnb',
        'COIN': 'Coinbase', 'MSTR': 'MicroStrategy', 'QCOM': 'Qualcomm', 'TXN': 'Texas Instruments',
        // Commodities
        'Gold': 'Gold', 'Silver': 'Silber', 'Platinum': 'Platin', 'Palladium': 'Paladyum', 'Copper': 'Kupfer',
        'Crude Oil (WTI)': 'RohÃ¶l (WTI)', 'Brent Oil': 'Brent Ã–l', 'Natural Gas': 'Erdgas',
        'Heating Oil': 'HeizÃ¶l', 'Gasoline': 'Benzin', 'Wheat': 'Weizen', 'Corn': 'Mais',
        'Soybeans': 'Sojabohnen', 'Coffee': 'Kaffee', 'Sugar': 'Zucker', 'Cotton': 'Baumwolle',
        'Cocoa': 'Kakao', 'Rice': 'Reis', 'Live Cattle': 'Lebendvieh', 'Lean Hogs': 'Mastschweine',
        // Units
        'oz': 'oz', 'ton': 't', 'barrel': 'Fass', 'MMBtu': 'MMBtu', 'gallon': 'Gallone', 'lb': 'Pfund',
        'bushel': 'Scheffel', 'cwt': 'Zentner',
        'unit_g': 'g',
        'last_updated': 'Zuletzt Aktualisiert',
        'next_update': 'NÃ¤chstes Update'
    }
};

function t(key) {
    const lang = localStorage.getItem('app_lang') || 'en';
    return translations[lang][key] || key;
}

function updateUILanguage() {
    try {
        const lang = localStorage.getItem('app_lang') || 'en';
        document.documentElement.lang = lang;

        // Update Page Title Mapping
        const viewTitles = {
            'dashboard': 'market_overview',
            'stocks': 'global_stocks',
            'commodities': 'commodity_prices',
            'forex': 'forex_rates',
            'news': 'breaking_news',
            'settings': 'preferences'
        };

        const currentView = (typeof State !== 'undefined') ? State.currentView : 'dashboard';
        const titleEl = document.getElementById('page-title');
        if (titleEl) titleEl.innerText = t(viewTitles[currentView]);

        // Navigation Sync
        Object.keys(viewTitles).forEach(view => {
            const navSpan = document.getElementById(`nav-${view}`);
            if (navSpan) navSpan.innerText = t(view);
        });

        // Other static labels
        const staticMap = {
            'conv-title': 'converter',
            'label-lang': 'lang_label',
            'set-title': 'preferences',
            'label-amount': 'label_amount',
            'res-label': 'res_label'
        };

        Object.entries(staticMap).forEach(([id, key]) => {
            const el = document.getElementById(id);
            if (el) el.innerText = t(key);
        });

        const searchInput = document.getElementById('global-search');
        if (searchInput) searchInput.placeholder = t('search_placeholder');

        // Refresh Current View to apply localized names/labels
        if (typeof State !== 'undefined' && State.data[State.currentView]) {
            if (typeof renderView === 'function') {
                renderView(State.currentView, State.data[State.currentView]);
            }
        }

    } catch (e) {
        console.warn('UI Language Sync non-fatal error:', e);
    }
}
